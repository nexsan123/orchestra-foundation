---
name: runtime-inspector
description: |
  è¿è¡Œæ£€æŸ¥å®˜ï¼ˆäº²éªŒä½¿ï¼‰- å¯åŠ¨é¡¹ç›®ã€æ‰“å¼€é¡µé¢ã€æ“ä½œç•Œé¢ã€æˆªå›¾å–è¯ã€‚
  æ ¸å¿ƒèƒ½åŠ›ï¼šåŸºäº Playwright çš„è¿è¡Œæ—¶éªŒè¯ï¼Œè®© Agent çœŸæ­£"çœ‹åˆ°"ç”¨æˆ·çœ‹åˆ°çš„ä¸œè¥¿ã€‚
  ä¸»è¦æœåŠ¡ Review Agentï¼Œä¹Ÿå¯æœåŠ¡ Test Agentã€‚
  âš ï¸ å¼ºåˆ¶è§„åˆ™ï¼šæ‰€æœ‰è¿è¡Œæ—¶éªŒè¯å¿…é¡»é€šè¿‡æœ¬ Skill è¿›è¡Œï¼Œä¸å¯å‡­æ¨æµ‹æè¿°é¡µé¢çŠ¶æ€ã€‚
  Use when (1) Review Agent ç”¨æˆ·è§†è§’å®¡æŸ¥, (2) Test Agent E2E éªŒè¯, (3) é¡µé¢åŠŸèƒ½äº¤æ¥éªŒè¯, (4) å¼‚å¸¸åœºæ™¯æ¨¡æ‹Ÿ, (5) æˆªå›¾å–è¯ã€‚
---

# ğŸ–¥ï¸ è¿è¡Œæ£€æŸ¥å®˜ï¼ˆäº²éªŒä½¿ï¼‰

> Orchestra ä½“ç³» Â· Review Agent / Test Agent è¿è¡Œæ—¶è¾…åŠ© Skill
> ç‰ˆæœ¬ï¼šv1.0
> âš ï¸ **è¿è¡Œæ—¶éªŒè¯å”¯ä¸€å…¥å£** - æ‰€æœ‰éœ€è¦å¯åŠ¨é¡¹ç›®ã€æ“ä½œé¡µé¢çš„éªŒè¯å¿…é¡»é€šè¿‡æ­¤ Skill è¿›è¡Œ

---

## ä¸€ã€å¼ºåˆ¶æ¶æ„è§„åˆ™

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚  âš ï¸ ã€å¼ºåˆ¶è§„åˆ™ã€‘è¿è¡Œæ—¶éªŒè¯å”¯ä¸€å…¥å£                                          â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â”‚
â”‚                                                                             â”‚
â”‚  Review Agent / Test Agent å¦‚éœ€è¿è¡Œé¡¹ç›®å¹¶éªŒè¯é¡µé¢è¡Œä¸ºï¼Œ                     â”‚
â”‚  å¿…é¡»ä¸”åªèƒ½é€šè¿‡ã€Œäº²éªŒä½¿ã€ï¼ˆæœ¬ Skillï¼‰è¿›è¡Œã€‚                                 â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚   Review Agent â”€â”€â”                                                  â”‚   â”‚
â”‚  â”‚                  â”œâ”€â”€â†’ ğŸ–¥ï¸ äº²éªŒä½¿ï¼ˆæœ¬ Skillï¼‰â”€â”€â†’ æˆªå›¾ + è¡Œä¸ºè¯æ®     â”‚   â”‚
â”‚  â”‚   Test Agent â”€â”€â”€â”€â”˜         â”‚                                        â”‚   â”‚
â”‚  â”‚                            â”œâ”€â†’ å¯åŠ¨é¡¹ç›®                             â”‚   â”‚
â”‚  â”‚                            â”œâ”€â†’ æ‰“å¼€é¡µé¢                             â”‚   â”‚
â”‚  â”‚                            â”œâ”€â†’ æ“ä½œç•Œé¢                             â”‚   â”‚
â”‚  â”‚                            â”œâ”€â†’ æˆªå›¾å–è¯                             â”‚   â”‚
â”‚  â”‚                            â”œâ”€â†’ æ¨¡æ‹Ÿå¼‚å¸¸                             â”‚   â”‚
â”‚  â”‚                            â””â”€â†’ éªŒè¯ç»“æœ                             â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  ã€ç›®çš„ã€‘                                                                   â”‚
â”‚  1. è®© Agent çœŸæ­£"çœ‹åˆ°"ç”¨æˆ·çœ‹åˆ°çš„é¡µé¢ï¼Œè€Œéæ¨æµ‹                            â”‚
â”‚  2. æä¾›æˆªå›¾ä½œä¸ºå®¡æŸ¥è¯æ®ï¼ˆå¯è¿½æº¯ã€å¯éªŒè¯ï¼‰                                 â”‚
â”‚  3. æ¨¡æ‹Ÿç”¨æˆ·çœŸå®æ“ä½œè·¯å¾„ï¼ˆç‚¹å‡»ã€è¾“å…¥ã€è·³è½¬ï¼‰                               â”‚
â”‚  4. æ¨¡æ‹Ÿå¼‚å¸¸åœºæ™¯ï¼ˆæ–­ç½‘ã€å¼±ç½‘ã€token è¿‡æœŸï¼‰                                 â”‚
â”‚                                                                             â”‚
â”‚  ã€ç¦æ­¢è¡Œä¸ºã€‘                                                               â”‚
â”‚  âŒ Agent ä¸å¯åœ¨æœªå¯åŠ¨é¡¹ç›®çš„æƒ…å†µä¸‹æè¿°"é¡µé¢çœ‹èµ·æ¥æ˜¯ä»€ä¹ˆæ ·"                  â”‚
â”‚  âŒ Agent ä¸å¯å‡­ä»£ç æ¨æµ‹æ›¿ä»£æˆªå›¾è¯æ®                                       â”‚
â”‚  âŒ Agent ä¸å¯è·³è¿‡æˆªå›¾ç›´æ¥å£°ç§°"é¡µé¢æ­£å¸¸"                                   â”‚
â”‚  âŒ Agent ä¸å¯ä¿®æ”¹é¡¹ç›®æºä»£ç ï¼ˆåªè¯»éªŒè¯ï¼‰                                   â”‚
â”‚                                                                             â”‚
â”‚  ã€å¿…é¡»è¡Œä¸ºã€‘                                                               â”‚
â”‚  âœ… éªŒè¯é¡µé¢è¡Œä¸ºå‰å¿…é¡»å…ˆæˆªå›¾                                               â”‚
â”‚  âœ… æˆªå›¾å¿…é¡»ä¿å­˜ä¸ºè¯æ®æ–‡ä»¶                                                 â”‚
â”‚  âœ… æ¯æ¬¡æ“ä½œåå¿…é¡»é‡æ–°æˆªå›¾ç¡®è®¤ç»“æœ                                         â”‚
â”‚  âœ… å‘ç°å¼‚å¸¸å¿…é¡»æˆªå›¾è®°å½•                                                   â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## äºŒã€æ ¸å¿ƒå®šä½

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ–¥ï¸ è¿è¡Œæ£€æŸ¥å®˜ = äº²éªŒä½¿                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  ã€è§’è‰²ã€‘äº²éªŒä½¿ Â· äº²ä¸´ç°åœº Â· çœ¼è§ä¸ºå® Â· æˆªå›¾ä¸ºè¯               â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                                                         â”‚   â”‚
â”‚  â”‚  å·¡æŒ‰å¾¡å²ï¼ˆproject-scannerï¼‰= è¯»ä»£ç çœ‹ç»“æ„              â”‚   â”‚
â”‚  â”‚  äº²éªŒä½¿ï¼ˆruntime-inspectorï¼‰= è·‘ç¨‹åºçœ‹é¡µé¢              â”‚   â”‚
â”‚  â”‚                                                         â”‚   â”‚
â”‚  â”‚  ä¸¤è€…äº’è¡¥ï¼š                                             â”‚   â”‚
â”‚  â”‚  å·¡æŒ‰å¾¡å²å‘Šè¯‰ä½ "ä»£ç å†™äº†ä»€ä¹ˆ"                            â”‚   â”‚
â”‚  â”‚  äº²éªŒä½¿å‘Šè¯‰ä½ "ç”¨æˆ·çœ‹åˆ°ä»€ä¹ˆ"                              â”‚   â”‚
â”‚  â”‚                                                         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â”‚  ã€æŠ€æœ¯åŸºç¡€ã€‘Playwrightï¼ˆæ— å¤´æµè§ˆå™¨è‡ªåŠ¨åŒ–ï¼‰                     â”‚
â”‚  ã€è¾“å‡ºå½¢å¼ã€‘æˆªå›¾ PNG + æ§åˆ¶å°æ—¥å¿— + ç½‘ç»œè¯·æ±‚è®°å½•              â”‚
â”‚  ã€è¯æ®ç­‰çº§ã€‘æˆªå›¾ > ä»£ç æ¨æµ‹                                   â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Œ ç›®å½•

1. [ä¸€ã€å¼ºåˆ¶æ¶æ„è§„åˆ™](#ä¸€å¼ºåˆ¶æ¶æ„è§„åˆ™)
2. [äºŒã€æ ¸å¿ƒå®šä½](#äºŒæ ¸å¿ƒå®šä½)
3. [ä¸‰ã€å¹³å°æ”¯æŒ](#ä¸‰å¹³å°æ”¯æŒ)
4. [å››ã€ç¯å¢ƒå‡†å¤‡](#å››ç¯å¢ƒå‡†å¤‡)
5. [äº”ã€æ¥å£æ€»è§ˆ](#äº”æ¥å£æ€»è§ˆ)
6. [å…­ã€æ¥å£è¯¦ç»†å®šä¹‰](#å…­æ¥å£è¯¦ç»†å®šä¹‰)
7. [ä¸ƒã€Review Agent è°ƒç”¨è§„èŒƒ](#ä¸ƒreview-agent-è°ƒç”¨è§„èŒƒ)
8. [å…«ã€Test Agent è°ƒç”¨è§„èŒƒ](#å…«test-agent-è°ƒç”¨è§„èŒƒ)
9. [ä¹ã€æˆªå›¾è¯æ®è§„èŒƒ](#ä¹æˆªå›¾è¯æ®è§„èŒƒ)
10. [åã€å®‰å…¨ä¸éš”ç¦»](#åå®‰å…¨ä¸éš”ç¦»)
11. [åä¸€ã€é“å¾‹æ¸…å•](#åä¸€é“å¾‹æ¸…å•)
12. [åäºŒã€ç‰ˆæœ¬å†å²](#åäºŒç‰ˆæœ¬å†å²)

---

## ä¸‰ã€å¹³å°æ”¯æŒ

```yaml
platform_support:

  tier_1_å®Œæ•´æ”¯æŒ:
    name: "ç½‘é¡µåº”ç”¨"
    engine: "Playwright Chromiumï¼ˆæ— å¤´æ¨¡å¼ï¼‰"
    èƒ½åŠ›:
      - "æ‰“å¼€ä»»æ„é¡µé¢"
      - "ç‚¹å‡»/è¾“å…¥/é€‰æ‹©/æ»šåŠ¨"
      - "æˆªå›¾ï¼ˆå…¨é¡µ/å…ƒç´ ï¼‰"
      - "æ‹¦æˆªç½‘ç»œè¯·æ±‚"
      - "æ¨¡æ‹Ÿæ–­ç½‘/å¼±ç½‘"
      - "æ•è·æ§åˆ¶å°é”™è¯¯"
      - "æ¨¡æ‹Ÿä¸åŒè®¾å¤‡ viewport"
    é€‚ç”¨æ¡†æ¶:
      - "React / Next.js"
      - "Vue / Nuxt"
      - "Angular"
      - "Svelte / SvelteKit"
      - "ä»»æ„ Web åº”ç”¨"
    å¯åŠ¨æ–¹å¼: "npm run dev / yarn dev / pnpm dev"

  tier_2_è§†å£æ¨¡æ‹Ÿ:
    name: "ç§»åŠ¨ç«¯ Webï¼ˆå“åº”å¼ï¼‰"
    engine: "Playwright + è®¾å¤‡è§†å£é¢„è®¾"
    èƒ½åŠ›:
      - "æ¨¡æ‹Ÿ iPhone / Android å±å¹•å°ºå¯¸"
      - "æ¨¡æ‹Ÿè§¦æ‘¸äº‹ä»¶"
      - "éªŒè¯å“åº”å¼å¸ƒå±€"
    é€‚ç”¨æ¡†æ¶:
      - "æ‰€æœ‰å“åº”å¼ Web åº”ç”¨"
      - "PWA"
    é™åˆ¶:
      - "æ— æ³•æµ‹è¯•åŸç”Ÿæ‰‹åŠ¿ï¼ˆå¦‚ iOS å›å¼¹ï¼‰"
      - "æ— æ³•æµ‹è¯•åŸç”Ÿç»„ä»¶ï¼ˆå¦‚ç³»ç»Ÿæ—¥æœŸé€‰æ‹©å™¨ï¼‰"

  tier_3_æ¡†æ¶ä¸“ç”¨:
    name: "æ¡Œé¢åº”ç”¨ï¼ˆElectronï¼‰"
    engine: "Playwright Electron æ”¯æŒ"
    èƒ½åŠ›:
      - "å¯åŠ¨ Electron åº”ç”¨"
      - "æ“ä½œçª—å£å†…å®¹"
      - "æˆªå›¾"
    é€‚ç”¨æ¡†æ¶:
      - "Electron"
    é™åˆ¶:
      - "éœ€è¦åº”ç”¨æœ‰ Electron æµ‹è¯•é…ç½®"

  not_supported:
    name: "æš‚ä¸æ”¯æŒ"
    åˆ—è¡¨:
      - "åŸç”Ÿ iOS åº”ç”¨ï¼ˆéœ€ macOS + Xcode + Simulatorï¼‰"
      - "åŸç”Ÿ Android åº”ç”¨ï¼ˆéœ€ Android SDK + Emulatorï¼Œç¯å¢ƒé‡ï¼‰"
      - "åŸç”Ÿæ¡Œé¢åº”ç”¨ï¼ˆQt / WPF / SwiftUIï¼‰"
      - "å°ç¨‹åºï¼ˆå¾®ä¿¡/æ”¯ä»˜å®ç­‰å°é—­ç”Ÿæ€ï¼‰"
    æœªæ¥æ–¹å‘: "æ ¹æ®é¡¹ç›®å®é™…éœ€è¦é€æ­¥æ”¯æŒ"
```

---

## å››ã€ç¯å¢ƒå‡†å¤‡

```yaml
environment_setup:

  # ========== å‰ç½®ä¾èµ– ==========
  prerequisites:
    å¿…é¡»:
      - name: "Node.js"
        version: ">= 18"
        æ£€æŸ¥: "node --version"
      - name: "npm / yarn / pnpm"
        æ£€æŸ¥: "npm --version"
    è‡ªåŠ¨å®‰è£…:
      - name: "Playwright"
        å®‰è£…: "npx playwright install chromium"
        è¯´æ˜: "é¦–æ¬¡è°ƒç”¨æ—¶è‡ªåŠ¨æ£€æŸ¥ï¼Œæœªå®‰è£…åˆ™æç¤ºå®‰è£…"

  # ========== é¡¹ç›®å¯åŠ¨æ£€æµ‹ ==========
  project_detection:
    æ£€æµ‹é¡ºåº:
      1:
        file: "package.json"
        æŸ¥æ‰¾: "scripts.dev æˆ– scripts.start"
        å‘½ä»¤: "npm run dev / npm start"
      2:
        file: "package.json"
        æŸ¥æ‰¾: "scripts.serve"
        å‘½ä»¤: "npm run serve"
      3:
        file: "Makefile"
        æŸ¥æ‰¾: "dev / serve ç›®æ ‡"
        å‘½ä»¤: "make dev"
    æ£€æµ‹å¤±è´¥:
      action: "ä¸ŠæŠ¥è°ƒç”¨æ–¹ Agentï¼Œè¯·æ±‚ç”¨æˆ·æä¾›å¯åŠ¨å‘½ä»¤"
      ç¦æ­¢: "ä¸å¯çŒœæµ‹å¯åŠ¨å‘½ä»¤"

  # ========== ç«¯å£æ£€æµ‹ ==========
  port_detection:
    æ–¹æ³•: "å¯åŠ¨é¡¹ç›®åç›‘å¬ stdoutï¼Œæå–ç«¯å£å·"
    å¤‡é€‰: "æ£€æŸ¥å¸¸è§ç«¯å£ï¼ˆ3000, 5173, 8080, 4200ï¼‰æ˜¯å¦æœ‰å“åº”"
    è¶…æ—¶: "30 ç§’å†…æœªæ£€æµ‹åˆ°ç«¯å£ = å¯åŠ¨å¤±è´¥"

  # ========== æˆªå›¾å­˜å‚¨ ==========
  screenshot_storage:
    ç›®å½•: "{project_root}/review-output/screenshots/"
    å‘½å: "{timestamp}_{action_name}.png"
    ç¤ºä¾‹: "20260202_143052_login_page.png"
```

---

## äº”ã€æ¥å£æ€»è§ˆ

### Layer 1: é¡¹ç›®ç®¡ç†æ¥å£

| # | æ¥å£å | ç”¨é€” | è°ƒç”¨æ—¶æœº |
|---|--------|------|----------|
| 1 | start_project | å¯åŠ¨é¡¹ç›® dev server | å®¡æŸ¥/æµ‹è¯•å¼€å§‹æ—¶ |
| 2 | stop_project | åœæ­¢é¡¹ç›® | å®¡æŸ¥/æµ‹è¯•ç»“æŸæ—¶ |
| 3 | get_project_status | è·å–é¡¹ç›®è¿è¡ŒçŠ¶æ€ | éšæ—¶ |

### Layer 2: é¡µé¢å¯¼èˆªæ¥å£

| # | æ¥å£å | ç”¨é€” | è°ƒç”¨æ—¶æœº |
|---|--------|------|----------|
| 4 | open_page | æ‰“å¼€æŒ‡å®šé¡µé¢ | å¼€å§‹æ£€æŸ¥æŸé¡µé¢æ—¶ |
| 5 | navigate | è·³è½¬åˆ°æŒ‡å®š URL | éªŒè¯è·³è½¬é€»è¾‘æ—¶ |
| 6 | go_back | æµè§ˆå™¨åé€€ | éªŒè¯åé€€è¡Œä¸ºæ—¶ |
| 7 | refresh | åˆ·æ–°å½“å‰é¡µé¢ | éªŒè¯åˆ·æ–°åçŠ¶æ€ä¿æŒ |

### Layer 3: ç”¨æˆ·äº¤äº’æ¥å£

| # | æ¥å£å | ç”¨é€” | è°ƒç”¨æ—¶æœº |
|---|--------|------|----------|
| 8 | click | ç‚¹å‡»å…ƒç´  | æ¨¡æ‹Ÿç”¨æˆ·ç‚¹å‡» |
| 9 | type_text | åœ¨è¾“å…¥æ¡†ä¸­è¾“å…¥æ–‡æœ¬ | æ¨¡æ‹Ÿç”¨æˆ·è¾“å…¥ |
| 10 | select_option | é€‰æ‹©ä¸‹æ‹‰é€‰é¡¹ | æ¨¡æ‹Ÿç”¨æˆ·é€‰æ‹© |
| 11 | scroll | æ»šåŠ¨é¡µé¢ | éªŒè¯æ»šåŠ¨åŠ è½½/æ‡’åŠ è½½ |
| 12 | wait_for | ç­‰å¾…å…ƒç´ å‡ºç°æˆ–æ—¶é—´ | ç­‰å¾…å¼‚æ­¥æ“ä½œå®Œæˆ |

### Layer 4: æˆªå›¾ä¸å–è¯æ¥å£

| # | æ¥å£å | ç”¨é€” | è°ƒç”¨æ—¶æœº |
|---|--------|------|----------|
| 13 | screenshot | æˆªå–å½“å‰é¡µé¢ | æ¯æ¬¡æ“ä½œå |
| 14 | screenshot_element | æˆªå–æŒ‡å®šå…ƒç´  | éœ€è¦å±€éƒ¨è¯æ®æ—¶ |
| 15 | get_console_log | è·å–æ§åˆ¶å°æ—¥å¿— | æ£€æŸ¥ JS é”™è¯¯æ—¶ |
| 16 | get_network_log | è·å–ç½‘ç»œè¯·æ±‚è®°å½• | æ£€æŸ¥ API è°ƒç”¨æ—¶ |

### Layer 5: é¡µé¢çŠ¶æ€æŸ¥è¯¢æ¥å£

| # | æ¥å£å | ç”¨é€” | è°ƒç”¨æ—¶æœº |
|---|--------|------|----------|
| 17 | get_current_url | è·å–å½“å‰é¡µé¢ URL | éªŒè¯è·³è½¬ç›®æ ‡ |
| 18 | get_page_title | è·å–é¡µé¢æ ‡é¢˜ | éªŒè¯é¡µé¢æ­£ç¡®æ€§ |
| 19 | check_element_exists | æ£€æŸ¥å…ƒç´ æ˜¯å¦å­˜åœ¨ | éªŒè¯ UI æ¸²æŸ“ |
| 20 | get_element_text | è·å–å…ƒç´ æ–‡æœ¬å†…å®¹ | éªŒè¯æ˜¾ç¤ºå†…å®¹ |
| 21 | check_element_visible | æ£€æŸ¥å…ƒç´ æ˜¯å¦å¯è§ | éªŒè¯æ˜¾ç¤º/éšè—é€»è¾‘ |

### Layer 6: å¼‚å¸¸æ¨¡æ‹Ÿæ¥å£

| # | æ¥å£å | ç”¨é€” | è°ƒç”¨æ—¶æœº |
|---|--------|------|----------|
| 22 | simulate_offline | æ¨¡æ‹Ÿæ–­ç½‘ | éªŒè¯ç¦»çº¿å¤„ç† |
| 23 | simulate_slow_network | æ¨¡æ‹Ÿå¼±ç½‘ | éªŒè¯ loading çŠ¶æ€ |
| 24 | simulate_viewport | åˆ‡æ¢è®¾å¤‡è§†å£ | éªŒè¯å“åº”å¼å¸ƒå±€ |
| 25 | clear_browser_data | æ¸…é™¤æµè§ˆå™¨æ•°æ® | æ¨¡æ‹Ÿé¦–æ¬¡è®¿é—®/é€€å‡ºç™»å½• |
| 26 | inject_token_expired | æ¨¡æ‹Ÿ token è¿‡æœŸ | éªŒè¯è®¤è¯å¤±æ•ˆå¤„ç† |

---

## å…­ã€æ¥å£è¯¦ç»†å®šä¹‰

### 4.1 start_project - å¯åŠ¨é¡¹ç›®

```yaml
start_project:

  description: "å¯åŠ¨é¡¹ç›®çš„ dev serverï¼Œå‡†å¤‡è¿è¡Œæ—¶ç¯å¢ƒ"

  input:
    project_path:
      type: "string"
      description: "é¡¹ç›®æ ¹ç›®å½•è·¯å¾„"
      required: true

    start_command:
      type: "string"
      description: "å¯åŠ¨å‘½ä»¤ï¼ˆå¯é€‰ï¼Œé»˜è®¤è‡ªåŠ¨æ£€æµ‹ï¼‰"
      default: null
      example: "npm run dev"

    port:
      type: "number"
      description: "æŒ‡å®šç«¯å£ï¼ˆå¯é€‰ï¼Œé»˜è®¤è‡ªåŠ¨æ£€æµ‹ï¼‰"
      default: null

    wait_timeout:
      type: "number"
      description: "ç­‰å¾…å¯åŠ¨è¶…æ—¶ï¼ˆæ¯«ç§’ï¼‰"
      default: 30000

  output:
    success: boolean
    project_url: "stringï¼ˆå¦‚ http://localhost:3000ï¼‰"
    port: number
    pid: "numberï¼ˆè¿›ç¨‹ IDï¼Œç”¨äºåç»­åœæ­¢ï¼‰"
    start_time: "stringï¼ˆISO æ—¶é—´æˆ³ï¼‰"
    detected_framework: "stringï¼ˆå¦‚ Next.js / Vite / CRAï¼‰"

  æµç¨‹:
    step_1: "æ£€æŸ¥ project_path æ˜¯å¦å­˜åœ¨ package.json"
    step_2: "æ£€æµ‹å¯åŠ¨å‘½ä»¤ï¼ˆå¦‚æœªæŒ‡å®šï¼‰"
    step_3: "æ£€æŸ¥ç«¯å£æ˜¯å¦è¢«å ç”¨"
    step_4: "æ‰§è¡Œå¯åŠ¨å‘½ä»¤ï¼ˆåå°è¿è¡Œï¼‰"
    step_5: "ç­‰å¾…ç«¯å£å¯ç”¨ï¼ˆè½®è¯¢æ£€æµ‹ï¼‰"
    step_6: "éªŒè¯é¦–é¡µå¯è®¿é—®ï¼ˆHTTP GET è¿”å› 200ï¼‰"
    step_7: "è¿”å›é¡¹ç›® URL å’Œè¿›ç¨‹ä¿¡æ¯"

  é”™è¯¯å¤„ç†:
    ç«¯å£è¢«å ç”¨: "å°è¯•ä¸‹ä¸€ä¸ªç«¯å£ï¼ˆ+1ï¼‰ï¼Œæœ€å¤šå°è¯• 5 æ¬¡"
    å¯åŠ¨è¶…æ—¶: "è¿”å›å¤±è´¥ + æœ€å 20 è¡Œ stdout/stderr"
    å¯åŠ¨æŠ¥é”™: "è¿”å›å¤±è´¥ + å®Œæ•´é”™è¯¯ä¿¡æ¯"

  example_call: |
    result = await runtimeInspector.start_project({
      project_path: "/path/to/project",
      start_command: "npm run dev"
    })
    // result.project_url = "http://localhost:3000"
```

### 4.2 stop_project - åœæ­¢é¡¹ç›®

```yaml
stop_project:

  description: "åœæ­¢é¡¹ç›®çš„ dev server å¹¶æ¸…ç†èµ„æº"

  input:
    pid:
      type: "number"
      description: "start_project è¿”å›çš„è¿›ç¨‹ ID"
      required: true

  output:
    success: boolean
    stopped_at: "stringï¼ˆISO æ—¶é—´æˆ³ï¼‰"

  æµç¨‹:
    step_1: "å…³é—­ Playwright æµè§ˆå™¨å®ä¾‹"
    step_2: "ç»ˆæ­¢ dev server è¿›ç¨‹ï¼ˆkill pidï¼‰"
    step_3: "ç¡®è®¤ç«¯å£å·²é‡Šæ”¾"
    step_4: "æ¸…ç†ä¸´æ—¶æ–‡ä»¶"

  å¼ºåˆ¶è§„åˆ™: "å®¡æŸ¥/æµ‹è¯•ç»“æŸåå¿…é¡»è°ƒç”¨ï¼Œä¸å¯ç•™ä¸‹å­¤å„¿è¿›ç¨‹"
```

### 4.3 open_page - æ‰“å¼€é¡µé¢

```yaml
open_page:

  description: "åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€æŒ‡å®šé¡µé¢"

  input:
    url:
      type: "string"
      description: "é¡µé¢ URLï¼ˆç›¸å¯¹è·¯å¾„æˆ–ç»å¯¹è·¯å¾„ï¼‰"
      example: "/login"
      required: true

    viewport:
      type: "object"
      description: "è§†å£è®¾ç½®ï¼ˆå¯é€‰ï¼‰"
      default: { width: 1280, height: 720 }

    wait_until:
      type: "string"
      description: "ç­‰å¾…æ¡ä»¶"
      default: "networkidle"
      options: ["load", "domcontentloaded", "networkidle"]

  output:
    success: boolean
    final_url: "stringï¼ˆå®é™…åˆ°è¾¾çš„ URLï¼Œå¯èƒ½æœ‰é‡å®šå‘ï¼‰"
    page_title: string
    load_time_ms: number
    console_errors: "string[]ï¼ˆé¡µé¢åŠ è½½è¿‡ç¨‹ä¸­çš„ JS é”™è¯¯ï¼‰"
    screenshot_path: "stringï¼ˆè‡ªåŠ¨æˆªå›¾è·¯å¾„ï¼‰"

  è‡ªåŠ¨è¡Œä¸º:
    - "æ‰“å¼€é¡µé¢åè‡ªåŠ¨æˆªå›¾ï¼ˆä½œä¸ºåŸºå‡†çŠ¶æ€ï¼‰"
    - "è‡ªåŠ¨æ•è·é¡µé¢åŠ è½½è¿‡ç¨‹ä¸­çš„ console.error"
    - "è‡ªåŠ¨è®°å½•é¡µé¢åŠ è½½æ—¶é—´"

  example_call: |
    result = await runtimeInspector.open_page({
      url: "/login"
    })
    // è‡ªåŠ¨æˆªå›¾ä¿å­˜åˆ° review-output/screenshots/
```

### 4.4 click - ç‚¹å‡»å…ƒç´ 

```yaml
click:

  description: "ç‚¹å‡»é¡µé¢ä¸Šçš„æŒ‡å®šå…ƒç´ "

  input:
    selector:
      type: "string"
      description: "CSS é€‰æ‹©å™¨ æˆ– æ–‡æœ¬é€‰æ‹©å™¨"
      example: "button[type='submit']"
      required: true

    text:
      type: "string"
      description: "æŒ‰æ–‡æœ¬åŒ¹é…ï¼ˆä¼˜å…ˆäº selectorï¼‰"
      example: "ç™»å½•"

    wait_after:
      type: "number"
      description: "ç‚¹å‡»åç­‰å¾…æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰"
      default: 1000

    screenshot_after:
      type: "boolean"
      description: "ç‚¹å‡»åæ˜¯å¦è‡ªåŠ¨æˆªå›¾"
      default: true

  output:
    success: boolean
    element_found: boolean
    screenshot_path: "string | null"
    new_url: "stringï¼ˆå¦‚æœå‘ç”Ÿäº†è·³è½¬ï¼‰"
    console_errors_after: "string[]ï¼ˆç‚¹å‡»åæ–°å‡ºç°çš„ JS é”™è¯¯ï¼‰"

  é”™è¯¯å¤„ç†:
    å…ƒç´ ä¸å­˜åœ¨: "è¿”å› element_found: falseï¼Œæˆªå›¾å½“å‰é¡µé¢ä½œä¸ºè¯æ®"
    å…ƒç´ è¢«é®æŒ¡: "è¿”å›å¤±è´¥ + æˆªå›¾æ˜¾ç¤ºé®æŒ¡æƒ…å†µ"
    ç‚¹å‡»åè¶…æ—¶: "è¿”å› + æˆªå›¾å½“å‰çŠ¶æ€"

  example_call: |
    result = await runtimeInspector.click({
      text: "æäº¤è®¢å•",
      screenshot_after: true
    })
```

### 4.5 type_text - è¾“å…¥æ–‡æœ¬

```yaml
type_text:

  description: "åœ¨è¾“å…¥æ¡†ä¸­è¾“å…¥æ–‡æœ¬"

  input:
    selector:
      type: "string"
      description: "è¾“å…¥æ¡†çš„ CSS é€‰æ‹©å™¨"
      example: "input[name='email']"
      required: true

    text:
      type: "string"
      description: "è¦è¾“å…¥çš„æ–‡æœ¬"
      required: true

    clear_first:
      type: "boolean"
      description: "è¾“å…¥å‰æ˜¯å¦å…ˆæ¸…ç©º"
      default: true

    press_enter:
      type: "boolean"
      description: "è¾“å…¥åæ˜¯å¦æŒ‰å›è½¦"
      default: false

  output:
    success: boolean
    element_found: boolean

  example_call: |
    await runtimeInspector.type_text({
      selector: "input[name='email']",
      text: "test@example.com"
    })
```

### 4.6 screenshot - æˆªå–é¡µé¢

```yaml
screenshot:

  description: "æˆªå–å½“å‰é¡µé¢çŠ¶æ€ï¼Œä¿å­˜ä¸º PNG æ–‡ä»¶"

  input:
    name:
      type: "string"
      description: "æˆªå›¾å‘½åï¼ˆä¸å«æ‰©å±•åï¼‰"
      example: "login_empty_submit"
      required: true

    full_page:
      type: "boolean"
      description: "æ˜¯å¦æˆªå–å®Œæ•´é¡µé¢ï¼ˆå«æ»šåŠ¨åŒºåŸŸï¼‰"
      default: false

  output:
    success: boolean
    screenshot_path: "stringï¼ˆæ–‡ä»¶ç»å¯¹è·¯å¾„ï¼‰"
    file_size: "numberï¼ˆå­—èŠ‚ï¼‰"
    dimensions: "{ width: number, height: number }"

  å­˜å‚¨è§„åˆ™:
    ç›®å½•: "{project_root}/review-output/screenshots/"
    æ–‡ä»¶å: "{timestamp}_{name}.png"
    ç¤ºä¾‹: "20260202_143052_login_empty_submit.png"

  è¯æ®æ•ˆåŠ›: "æˆªå›¾æ˜¯æœ€é«˜çº§åˆ«çš„è¿è¡Œæ—¶è¯æ®ï¼Œä¼˜å…ˆäºä»£ç æ¨æµ‹"
```

### 4.7 get_console_log - è·å–æ§åˆ¶å°æ—¥å¿—

```yaml
get_console_log:

  description: "è·å–é¡µé¢çš„ console æ—¥å¿—ï¼ˆåŒ…æ‹¬ errorã€warnã€logï¼‰"

  input:
    level:
      type: "string"
      description: "æ—¥å¿—çº§åˆ«è¿‡æ»¤"
      default: "all"
      options: ["all", "error", "warn", "log"]

  output:
    logs:
      type: "array"
      items:
        level: "error | warn | log | info"
        text: "string"
        url: "stringï¼ˆæ¥æºæ–‡ä»¶ï¼‰"
        line: "numberï¼ˆè¡Œå·ï¼‰"
    error_count: number
    warn_count: number

  ç”¨é€”:
    - "æ£€æŸ¥é¡µé¢æ˜¯å¦æœ‰ JS è¿è¡Œæ—¶é”™è¯¯"
    - "æ£€æŸ¥æ˜¯å¦æœ‰æœªå¤„ç†çš„ Promise rejection"
    - "æ£€æŸ¥æ˜¯å¦æœ‰ console.error è¾“å‡º"
```

### 4.8 get_network_log - è·å–ç½‘ç»œè¯·æ±‚è®°å½•

```yaml
get_network_log:

  description: "è·å–é¡µé¢å‘å‡ºçš„ç½‘ç»œè¯·æ±‚è®°å½•"

  input:
    filter:
      type: "string"
      description: "URL è¿‡æ»¤ï¼ˆæ­£åˆ™ï¼‰"
      default: ".*"
      example: "/api/"

    include_response:
      type: "boolean"
      description: "æ˜¯å¦åŒ…å«å“åº”ä½“"
      default: false

  output:
    requests:
      type: "array"
      items:
        method: "GET | POST | PUT | DELETE | PATCH"
        url: "string"
        status: "numberï¼ˆHTTP çŠ¶æ€ç ï¼‰"
        duration_ms: number
        request_body: "string | null"
        response_status: number
        response_body: "string | nullï¼ˆä»… include_response=true æ—¶ï¼‰"
    total_requests: number
    failed_requests: number

  ç”¨é€”:
    - "æ£€æŸ¥é¡µé¢åŠ è½½æ—¶è°ƒç”¨äº†å“ªäº› API"
    - "æ£€æŸ¥æ˜¯å¦æœ‰ 4xx/5xx é”™è¯¯è¯·æ±‚"
    - "æ£€æŸ¥ API è°ƒç”¨é¡ºåºæ˜¯å¦æ­£ç¡®"
    - "éªŒè¯è¯·æ±‚å‚æ•°æ˜¯å¦æ­£ç¡®"
```

### 4.9 check_element_exists - æ£€æŸ¥å…ƒç´ å­˜åœ¨

```yaml
check_element_exists:

  description: "æ£€æŸ¥é¡µé¢ä¸Šæ˜¯å¦å­˜åœ¨æŒ‡å®šå…ƒç´ "

  input:
    selector:
      type: "string"
      description: "CSS é€‰æ‹©å™¨"
      required: true

    text:
      type: "string"
      description: "åŒæ—¶åŒ¹é…æ–‡æœ¬å†…å®¹ï¼ˆå¯é€‰ï¼‰"

    timeout:
      type: "number"
      description: "ç­‰å¾…è¶…æ—¶ï¼ˆæ¯«ç§’ï¼‰"
      default: 5000

  output:
    exists: boolean
    visible: boolean
    count: "numberï¼ˆåŒ¹é…åˆ°çš„å…ƒç´ æ•°é‡ï¼‰"
    text_content: "string | nullï¼ˆå…ƒç´ æ–‡æœ¬ï¼‰"

  ç”¨é€”:
    - "æ£€æŸ¥è¡¨å•æ ¡éªŒæç¤ºæ˜¯å¦å‡ºç°"
    - "æ£€æŸ¥ loading çŠ¶æ€æ˜¯å¦æ˜¾ç¤º"
    - "æ£€æŸ¥ç©ºçŠ¶æ€ç»„ä»¶æ˜¯å¦æ¸²æŸ“"
    - "æ£€æŸ¥é”™è¯¯æç¤ºæ˜¯å¦å­˜åœ¨"
```

### 4.10 get_element_text - è·å–å…ƒç´ æ–‡æœ¬

```yaml
get_element_text:

  description: "è·å–æŒ‡å®šå…ƒç´ çš„æ–‡æœ¬å†…å®¹"

  input:
    selector:
      type: "string"
      description: "CSS é€‰æ‹©å™¨"
      required: true

  output:
    success: boolean
    text: "string | null"
    inner_html: "string | null"

  ç”¨é€”:
    - "éªŒè¯æ•°æ®æ˜¯å¦æ­£ç¡®æ˜¾ç¤º"
    - "éªŒè¯é”™è¯¯æç¤ºå†…å®¹æ˜¯å¦æ­£ç¡®"
    - "éªŒè¯é¡µé¢æ ‡é¢˜/æ ‡ç­¾æ˜¯å¦æ­£ç¡®"
```

### 4.11 simulate_offline - æ¨¡æ‹Ÿæ–­ç½‘

```yaml
simulate_offline:

  description: "æ¨¡æ‹Ÿç½‘ç»œæ–­å¼€çŠ¶æ€"

  input:
    action:
      type: "string"
      description: "æ–­ç½‘æˆ–æ¢å¤"
      options: ["offline", "online"]
      required: true

  output:
    success: boolean
    network_state: "offline | online"

  ä½¿ç”¨æ¨¡å¼: |
    1. simulate_offline({ action: "offline" })    # æ–­ç½‘
    2. click({ text: "æäº¤" })                     # æ“ä½œ
    3. screenshot({ name: "submit_while_offline" }) # æˆªå›¾å–è¯
    4. simulate_offline({ action: "online" })      # æ¢å¤ç½‘ç»œ

  Playwrightå®ç°: "page.context().setOffline(true/false)"
```

### 4.12 simulate_slow_network - æ¨¡æ‹Ÿå¼±ç½‘

```yaml
simulate_slow_network:

  description: "æ¨¡æ‹Ÿæ…¢é€Ÿç½‘ç»œç¯å¢ƒ"

  input:
    profile:
      type: "string"
      description: "ç½‘ç»œé€Ÿåº¦é¢„è®¾"
      options: ["3g", "slow-3g", "normal"]
      default: "3g"

  output:
    success: boolean
    current_profile: string

  é¢„è®¾å‚æ•°:
    3g:
      download: "750 KB/s"
      upload: "250 KB/s"
      latency: "100ms"
    slow-3g:
      download: "400 KB/s"
      upload: "150 KB/s"
      latency: "300ms"

  ç”¨é€”: "éªŒè¯ loading çŠ¶æ€æ˜¯å¦æ­£ç¡®æ˜¾ç¤ºï¼Œç”¨æˆ·ä½“éªŒæ˜¯å¦å¯æ¥å—"
```

### 4.13 simulate_viewport - åˆ‡æ¢è®¾å¤‡è§†å£

```yaml
simulate_viewport:

  description: "åˆ‡æ¢æµè§ˆå™¨è§†å£å¤§å°ä»¥æ¨¡æ‹Ÿä¸åŒè®¾å¤‡"

  input:
    device:
      type: "string"
      description: "è®¾å¤‡é¢„è®¾æˆ–è‡ªå®šä¹‰å°ºå¯¸"
      options: ["desktop", "tablet", "mobile", "custom"]
      default: "desktop"

    custom_size:
      type: "object"
      description: "è‡ªå®šä¹‰å°ºå¯¸ï¼ˆdevice=custom æ—¶ç”Ÿæ•ˆï¼‰"
      example: { width: 375, height: 812 }

  é¢„è®¾å°ºå¯¸:
    desktop: { width: 1280, height: 720 }
    tablet: { width: 768, height: 1024 }
    mobile: { width: 375, height: 667 }

  output:
    success: boolean
    viewport: "{ width, height }"
    screenshot_path: "stringï¼ˆåˆ‡æ¢åè‡ªåŠ¨æˆªå›¾ï¼‰"

  ç”¨é€”: "éªŒè¯å“åº”å¼å¸ƒå±€æ˜¯å¦æ­£ç¡®"
```

### 4.14 clear_browser_data - æ¸…é™¤æµè§ˆå™¨æ•°æ®

```yaml
clear_browser_data:

  description: "æ¸…é™¤æµè§ˆå™¨å­˜å‚¨æ•°æ®"

  input:
    targets:
      type: "string[]"
      description: "è¦æ¸…é™¤çš„æ•°æ®ç±»å‹"
      default: ["localStorage", "sessionStorage", "cookies"]
      options: ["localStorage", "sessionStorage", "cookies", "all"]

  output:
    success: boolean
    cleared: "string[]"

  ç”¨é€”:
    - "æ¨¡æ‹Ÿç”¨æˆ·é¦–æ¬¡è®¿é—®"
    - "æ¨¡æ‹Ÿé€€å‡ºç™»å½•ï¼ˆæ¸…é™¤ tokenï¼‰"
    - "éªŒè¯æ¸…é™¤åé¡µé¢è¡Œä¸º"
```

### 4.15 inject_token_expired - æ¨¡æ‹Ÿ token è¿‡æœŸ

```yaml
inject_token_expired:

  description: "å°†å­˜å‚¨ä¸­çš„è®¤è¯ token æ›¿æ¢ä¸ºè¿‡æœŸ/æ— æ•ˆå€¼"

  input:
    token_location:
      type: "string"
      description: "token å­˜å‚¨ä½ç½®"
      options: ["localStorage", "sessionStorage", "cookie"]
      required: true

    token_key:
      type: "string"
      description: "token çš„ key å"
      example: "access_token"
      required: true

    strategy:
      type: "string"
      description: "å¤±æ•ˆç­–ç•¥"
      options: ["expired", "malformed", "empty", "removed"]
      default: "expired"

  output:
    success: boolean
    original_token: "stringï¼ˆåŸå§‹ tokenï¼Œç”¨äºæ¢å¤ï¼‰"
    injected_value: "stringï¼ˆæ³¨å…¥çš„å€¼ï¼‰"

  ç”¨é€”: "éªŒè¯ token è¿‡æœŸåï¼Œé¡µé¢æ˜¯å¦æ­£ç¡®è·³è½¬ç™»å½•é¡µ"
```

### 4.16 wait_for - ç­‰å¾…

```yaml
wait_for:

  description: "ç­‰å¾…å…ƒç´ å‡ºç°æˆ–æŒ‡å®šæ—¶é—´"

  input:
    selector:
      type: "string"
      description: "ç­‰å¾…æ­¤å…ƒç´ å‡ºç°ï¼ˆäºŒé€‰ä¸€ï¼‰"

    timeout:
      type: "number"
      description: "ç­‰å¾…æ—¶é—´æ¯«ç§’ï¼ˆäºŒé€‰ä¸€ï¼‰"

    state:
      type: "string"
      description: "ç­‰å¾…å…ƒç´ è¾¾åˆ°çš„çŠ¶æ€"
      options: ["visible", "hidden", "attached", "detached"]
      default: "visible"

  output:
    success: boolean
    waited_ms: number

  ç”¨é€”:
    - "ç­‰å¾… API è¿”å›å UI æ›´æ–°"
    - "ç­‰å¾…åŠ¨ç”»å®Œæˆåæˆªå›¾"
    - "ç­‰å¾… loading æ¶ˆå¤±åéªŒè¯å†…å®¹"
```

### 4.17 navigate - è·³è½¬é¡µé¢

```yaml
navigate:

  description: "è·³è½¬åˆ°æŒ‡å®š URL"

  input:
    url:
      type: "string"
      description: "ç›®æ ‡ URL"
      required: true

    wait_until:
      type: "string"
      default: "networkidle"

  output:
    success: boolean
    final_url: string
    redirected: boolean
    screenshot_path: string

  ç”¨é€”:
    - "ç›´æ¥è¾“å…¥ URL è®¿é—®å—ä¿æŠ¤é¡µé¢ï¼ˆéªŒè¯è·¯ç”±å®ˆå«ï¼‰"
    - "è·³è½¬åˆ°ç‰¹å®šé¡µé¢ç»§ç»­éªŒè¯"
```

### 4.18 go_back - æµè§ˆå™¨åé€€

```yaml
go_back:

  description: "æ¨¡æ‹Ÿæµè§ˆå™¨åé€€æŒ‰é’®"

  output:
    success: boolean
    previous_url: string
    current_url: string
    screenshot_path: string

  ç”¨é€”: "éªŒè¯åé€€è¡Œä¸ºæ˜¯å¦æ­£ç¡®ï¼ˆæ•°æ®ä¿æŒã€çŠ¶æ€æ¢å¤ï¼‰"
```

### 4.19 refresh - åˆ·æ–°é¡µé¢

```yaml
refresh:

  description: "åˆ·æ–°å½“å‰é¡µé¢"

  output:
    success: boolean
    url: string
    screenshot_path: string

  ç”¨é€”: "éªŒè¯åˆ·æ–°åçŠ¶æ€æ˜¯å¦ä¿æŒï¼ˆè¡¨å•æ•°æ®ã€ç™»å½•çŠ¶æ€ã€é¡µé¢ä½ç½®ï¼‰"
```

### 4.20 get_current_url - è·å–å½“å‰ URL

```yaml
get_current_url:

  description: "è·å–å½“å‰é¡µé¢çš„ URL"

  output:
    url: string
    path: string
    query: object
    hash: string

  ç”¨é€”: "éªŒè¯è·³è½¬ç›®æ ‡æ˜¯å¦æ­£ç¡®"
```

---

## ä¸ƒã€Review Agent è°ƒç”¨è§„èŒƒ

```yaml
review_agent_integration:

  # ========== è°ƒç”¨æ—¶æœº ==========
  when_to_call:
    å¿…é¡»è°ƒç”¨:
      - "3.5 ç”¨æˆ·è§†è§’å®¡æŸ¥çš„é¡µé¢é‡‡æ ·æ£€æŸ¥"
      - "3.5 é¡µé¢åŠŸèƒ½äº¤æ¥éªŒè¯"
      - "3.5 é¡µé¢å†…é€»è¾‘é—­ç¯éªŒè¯"
      - "3.5 å¼‚å¸¸è·¯å¾„è¦†ç›–éªŒè¯"
    å¯é€‰è°ƒç”¨:
      - "3.5 è·¨åŠŸèƒ½é€»è¾‘é—­ç¯ï¼ˆå®Œæ•´ç”¨æˆ·æ—…ç¨‹ï¼‰"
      - "3.5 çŠ¶æ€ä¸€è‡´æ€§æ£€æŸ¥"

  # ========== æ ‡å‡†å®¡æŸ¥æµç¨‹ ==========
  standard_review_flow:

    step_1_å¯åŠ¨:
      action: "start_project()"
      è¾“å‡º: "project_url"
      å¤±è´¥å¤„ç†: "è®°å½•å¤±è´¥åŸå› ï¼Œä¸ŠæŠ¥ç”¨æˆ·ï¼Œæ— æ³•è¿›è¡Œè¿è¡Œæ—¶å®¡æŸ¥"

    step_2_æå–è·¯ç”±:
      action: "é€šè¿‡å·¡æŒ‰å¾¡å²è·å–è·¯ç”±è¡¨ï¼ˆé™æ€åˆ†æï¼‰"
      è¾“å‡º: "é¡µé¢æ¸…å•"

    step_3_é€é¡µå®¡æŸ¥:
      action: "æŒ‰é‡‡æ ·ç­–ç•¥é€é¡µå®¡æŸ¥"
      æ¯é¡µæµç¨‹: |
        1. open_page(url)                    â†’ æˆªå›¾ï¼šé¡µé¢åˆå§‹çŠ¶æ€
        2. check_element_exists(å…³é”®å…ƒç´ )     â†’ éªŒè¯é¡µé¢æ¸²æŸ“å®Œæ•´
        3. get_console_log(level: "error")   â†’ æ£€æŸ¥ JS é”™è¯¯
        4. æ‰§è¡Œç”¨æˆ·æ“ä½œåºåˆ—ï¼š
           a. type_text / click / select      â†’ æ¨¡æ‹Ÿç”¨æˆ·äº¤äº’
           b. screenshot(æ“ä½œåçŠ¶æ€)           â†’ æˆªå›¾å–è¯
           c. check_element_exists(é¢„æœŸç»“æœ)   â†’ éªŒè¯æ“ä½œç»“æœ
        5. å¼‚å¸¸éªŒè¯ï¼š
           a. simulate_offline â†’ æ“ä½œ â†’ screenshot â†’ simulate_online
           b. clear_browser_data â†’ refresh â†’ screenshot
           c. inject_token_expired â†’ æ“ä½œ â†’ screenshot

    step_4_äº¤æ¥éªŒè¯:
      action: "éªŒè¯é¡µé¢é—´è·³è½¬"
      æµç¨‹: |
        1. open_page(é¡µé¢A)
        2. click(è·³è½¬æŒ‰é’®)
        3. get_current_url()                 â†’ éªŒè¯åˆ°è¾¾æ­£ç¡®é¡µé¢
        4. check_element_exists(ä¼ é€’çš„æ•°æ®)   â†’ éªŒè¯æ•°æ®äº¤æ¥
        5. go_back()                          â†’ éªŒè¯åé€€
        6. screenshot(åé€€åçŠ¶æ€)

    step_5_é—­ç¯éªŒè¯:
      action: "å®Œæ•´ç”¨æˆ·æ—…ç¨‹"
      æµç¨‹: |
        æŒ‰ç”¨æˆ·æ—…ç¨‹é€æ­¥æ“ä½œï¼š
        æ³¨å†Œ â†’ ç™»å½• â†’ ä½¿ç”¨ â†’ ä¿®æ”¹ â†’ é€€å‡º
        æ¯æ­¥éƒ½æˆªå›¾ + éªŒè¯

    step_6_åœæ­¢:
      action: "stop_project()"
      å¼ºåˆ¶: "å¿…é¡»æ‰§è¡Œï¼Œä¸å¯é—æ¼"

  # ========== è¯æ®è¦æ±‚ ==========
  evidence_rules:
    - "æ¯ä¸ªè¢«å®¡æŸ¥çš„é¡µé¢è‡³å°‘ 1 å¼ åˆå§‹çŠ¶æ€æˆªå›¾"
    - "æ¯ä¸ªç”¨æˆ·æ“ä½œè‡³å°‘ 1 å¼ æ“ä½œåæˆªå›¾"
    - "æ¯ä¸ªå¼‚å¸¸æ¨¡æ‹Ÿè‡³å°‘ 1 å¼ å¼‚å¸¸çŠ¶æ€æˆªå›¾"
    - "é¡µé¢äº¤æ¥éªŒè¯å¿…é¡»æœ‰è·³è½¬å‰åå„ 1 å¼ æˆªå›¾"
    - "æ‰€æœ‰æˆªå›¾å¿…é¡»ä¿å­˜åœ¨ review-output/screenshots/"
```

---

## å…«ã€Test Agent è°ƒç”¨è§„èŒƒ

```yaml
test_agent_integration:

  # ========== è°ƒç”¨åœºæ™¯ ==========
  when_to_call:
    E2Eæµ‹è¯•:
      - "éªŒè¯å®Œæ•´ç”¨æˆ·æµç¨‹æ˜¯å¦å¯èµ°é€š"
      - "éªŒè¯é¡µé¢æ¸²æŸ“ç»“æœæ˜¯å¦ç¬¦åˆ Spec"
    å›å½’æµ‹è¯•:
      - "ä¿®æ”¹åéªŒè¯é¡µé¢æ˜¯å¦æ­£å¸¸"
      - "å¯¹æ¯”ä¿®æ”¹å‰åçš„æˆªå›¾å·®å¼‚"

  # ========== ä¸ Test Agent å·²æœ‰æµç¨‹çš„å…³ç³» ==========
  relationship:
    è¡¥å……è€Œéæ›¿ä»£:
      - "Test Agent çš„å•å…ƒæµ‹è¯•/é›†æˆæµ‹è¯•ç…§å¸¸æ‰§è¡Œ"
      - "äº²éªŒä½¿æä¾› E2E å±‚é¢çš„è¿è¡Œæ—¶éªŒè¯"
      - "ä¸¤è€…äº’è¡¥ï¼šå•å…ƒæµ‹è¯•éªŒè¯é€»è¾‘ï¼Œäº²éªŒä½¿éªŒè¯å±•ç¤º"
```

---

## ä¹ã€æˆªå›¾è¯æ®è§„èŒƒ

```yaml
screenshot_evidence:

  # ========== æˆªå›¾åˆ†ç±» ==========
  categories:

    baseline:
      å‘½å: "{page}_baseline"
      è¯´æ˜: "é¡µé¢åˆå§‹çŠ¶æ€ï¼Œä½œä¸ºåŸºå‡†"
      ç¤ºä¾‹: "login_page_baseline.png"

    action_result:
      å‘½å: "{page}_{action}_{result}"
      è¯´æ˜: "æ“ä½œåçš„é¡µé¢çŠ¶æ€"
      ç¤ºä¾‹: "login_page_submit_empty_validation_error.png"

    error_state:
      å‘½å: "{page}_{error_type}"
      è¯´æ˜: "å¼‚å¸¸/é”™è¯¯çŠ¶æ€"
      ç¤ºä¾‹: "login_page_network_offline.png"

    handoff:
      å‘½å: "{from_page}_to_{to_page}"
      è¯´æ˜: "é¡µé¢è·³è½¬çš„äº¤æ¥è¯æ®"
      ç¤ºä¾‹: "product_list_to_product_detail.png"

  # ========== æˆªå›¾æŠ¥å‘Š ==========
  screenshot_report_template: |
    ## æˆªå›¾è¯æ®æ¸…å•

    | # | æˆªå›¾ | é¡µé¢ | æ“ä½œ | ç»“æœ | æ–‡ä»¶ |
    |---|------|------|------|------|------|
    | 1 | ğŸ–¼ï¸ | /login | åˆå§‹çŠ¶æ€ | âœ… æ­£å¸¸ | login_baseline.png |
    | 2 | ğŸ–¼ï¸ | /login | ç©ºæäº¤ | âœ… æœ‰æ ¡éªŒæç¤º | login_submit_empty.png |
    | 3 | ğŸ–¼ï¸ | /login | æ–­ç½‘æäº¤ | âŒ ç™½å±æ— æç¤º | login_offline_submit.png |

  # ========== æˆªå›¾å­˜å‚¨ä¸Šé™ ==========
  storage_limits:
    å•æ¬¡å®¡æŸ¥æœ€å¤§æˆªå›¾: 100
    å•å¼ æˆªå›¾æœ€å¤§å°ºå¯¸: "5MB"
    è¶…é™å¤„ç†: "å‹ç¼©æˆ–åªä¿ç•™å…³é”®æˆªå›¾"
```

---

## åã€å®‰å…¨ä¸éš”ç¦»

```yaml
safety_and_isolation:

  # ========== åªè¯»åŸåˆ™ ==========
  read_only:
    rule: "äº²éªŒä½¿åªéªŒè¯ï¼Œä¸ä¿®æ”¹"
    ç¦æ­¢:
      - "âŒ ä¿®æ”¹é¡¹ç›®æºä»£ç "
      - "âŒ ä¿®æ”¹é¡¹ç›®é…ç½®æ–‡ä»¶"
      - "âŒ ä¿®æ”¹æ•°æ®åº“æ•°æ®ï¼ˆç›´æ¥æ“ä½œ DBï¼‰"
      - "âŒ æ‰§è¡Œ npm install / å®‰è£…æ–°ä¾èµ–"
    å…è®¸:
      - "âœ… é€šè¿‡é¡µé¢è¡¨å•æäº¤æµ‹è¯•æ•°æ®ï¼ˆé€šè¿‡æ­£å¸¸ UI æ“ä½œï¼‰"
      - "âœ… è¯»å–é¡µé¢çŠ¶æ€"
      - "âœ… æˆªå›¾"
      - "âœ… ä¿®æ”¹æµè§ˆå™¨ localStorage/cookieï¼ˆæ¨¡æ‹Ÿåœºæ™¯ï¼‰"

  # ========== æµ‹è¯•æ•°æ®éš”ç¦» ==========
  test_data:
    åŸåˆ™: "è¿è¡Œæ—¶éªŒè¯äº§ç”Ÿçš„æ•°æ®åº”å¯è¯†åˆ«ã€å¯æ¸…ç†"
    å»ºè®®:
      - "æµ‹è¯•ç”¨æˆ·åä½¿ç”¨å›ºå®šå‰ç¼€ï¼štest_review_*"
      - "æµ‹è¯•é‚®ç®±ä½¿ç”¨å›ºå®šåŸŸåï¼š*@review-test.local"
      - "å®¡æŸ¥ç»“æŸåæé†’ç”¨æˆ·æ¸…ç†æµ‹è¯•æ•°æ®"

  # ========== è¿›ç¨‹ç®¡ç† ==========
  process_management:
    rule: "å¯åŠ¨çš„è¿›ç¨‹å¿…é¡»åœæ­¢"
    æœºåˆ¶:
      æ­£å¸¸ç»“æŸ: "è°ƒç”¨ stop_project() åœæ­¢"
      å¼‚å¸¸é€€å‡º: "è®°å½• pidï¼Œä¸‹æ¬¡å¯åŠ¨æ—¶æ£€æŸ¥å¹¶æ¸…ç†"
      è¶…æ—¶ä¿æŠ¤: "dev server æœ€é•¿è¿è¡Œ 30 åˆ†é’Ÿï¼Œè¶…æ—¶è‡ªåŠ¨ç»ˆæ­¢"

  # ========== ç«¯å£ç®¡ç† ==========
  port_management:
    èŒƒå›´: "3000-4000"
    å†²çªå¤„ç†: "è‡ªåŠ¨é€’å¢ç«¯å£å·"
    é‡Šæ”¾ç¡®è®¤: "stop_project åç¡®è®¤ç«¯å£å·²é‡Šæ”¾"
```

---

## åä¸€ã€é“å¾‹æ¸…å•

```yaml
runtime_inspector_laws:

  RI-01:
    name: "å¯åŠ¨å¿…æˆåŠŸ"
    rule: "start_project å¤±è´¥æ—¶å¿…é¡»è¿”å›æ˜ç¡®åŸå› ï¼Œä¸å¯é™é»˜è·³è¿‡"
    severity: "ğŸ”´ æœ€é«˜çº§è¿è§„"
    æ£€æµ‹æ–¹æ³•:
      æ­¥éª¤:
        1: "æ£€æŸ¥ start_project è¿”å›å€¼"
        2: "success=false æ—¶æ˜¯å¦æœ‰ error ä¿¡æ¯"
        3: "æ— é”™è¯¯ä¿¡æ¯ = è¿è§„"
      è¯æ®: "start_project è¿”å›å€¼"

  RI-02:
    name: "æ“ä½œå¿…æˆªå›¾"
    rule: "æ¯æ¬¡ç”¨æˆ·æ“ä½œæ¨¡æ‹Ÿåå¿…é¡»æˆªå›¾å–è¯"
    severity: "ğŸ”´ æœ€é«˜çº§è¿è§„"
    æ£€æµ‹æ–¹æ³•:
      æ­¥éª¤:
        1: "ç»Ÿè®¡ click/type_text/navigate è°ƒç”¨æ¬¡æ•°"
        2: "ç»Ÿè®¡ screenshot è°ƒç”¨æ¬¡æ•°"
        3: "æˆªå›¾æ•° < æ“ä½œæ•° = è¿è§„"
      è¯æ®: "æ“ä½œæ—¥å¿— vs æˆªå›¾æ–‡ä»¶åˆ—è¡¨"

  RI-03:
    name: "æˆªå›¾å¿…ä¿å­˜"
    rule: "æ‰€æœ‰æˆªå›¾å¿…é¡»ä¿å­˜åˆ° review-output/screenshots/ ç›®å½•"
    severity: "âš ï¸ é‡è¦"
    æ£€æµ‹æ–¹æ³•:
      æ­¥éª¤:
        1: "æ£€æŸ¥ review-output/screenshots/ ç›®å½•æ˜¯å¦å­˜åœ¨"
        2: "æ£€æŸ¥æˆªå›¾æ–‡ä»¶æ•°é‡æ˜¯å¦ä¸æ“ä½œæ¬¡æ•°åŒ¹é…"
        3: "ç›®å½•ä¸å­˜åœ¨æˆ–æ–‡ä»¶ç¼ºå¤± = è¿è§„"
      è¯æ®: "æˆªå›¾æ–‡ä»¶åˆ—è¡¨"

  RI-04:
    name: "è¿›ç¨‹å¿…åœæ­¢"
    rule: "å®¡æŸ¥ç»“æŸåå¿…é¡»è°ƒç”¨ stop_project()ï¼Œä¸å¯ç•™ä¸‹å­¤å„¿è¿›ç¨‹"
    severity: "ğŸ”´ æœ€é«˜çº§è¿è§„"
    æ£€æµ‹æ–¹æ³•:
      æ­¥éª¤:
        1: "æ£€æŸ¥æ˜¯å¦æœ‰ start_project è°ƒç”¨"
        2: "æ˜¯å¦æœ‰å¯¹åº”çš„ stop_project è°ƒç”¨"
        3: "æœ‰å¯åŠ¨æ— åœæ­¢ = è¿è§„"
      è¯æ®: "start_project/stop_project é…å¯¹è®°å½•"

  RI-05:
    name: "ä¸å¯æ”¹æºç "
    rule: "äº²éªŒä½¿åªè¯»éªŒè¯ï¼Œä¸å¯ä¿®æ”¹é¡¹ç›®ä»»ä½•æºä»£ç æˆ–é…ç½®"
    severity: "ğŸ”´ æœ€é«˜çº§è¿è§„"
    æ£€æµ‹æ–¹æ³•:
      æ­¥éª¤:
        1: "å®¡æŸ¥å‰åå¯¹æ¯” git status"
        2: "æœ‰æ–‡ä»¶å˜æ›´ = è¿è§„"
      è¯æ®: "git diff è¾“å‡º"

  RI-06:
    name: "å¼‚å¸¸å¿…æ¨¡æ‹Ÿ"
    rule: "å®¡æŸ¥æ—¶å¿…é¡»è‡³å°‘æ¨¡æ‹Ÿæ–­ç½‘ã€token è¿‡æœŸä¸¤ç§å¼‚å¸¸åœºæ™¯"
    severity: "âš ï¸ é‡è¦"
    æ£€æµ‹æ–¹æ³•:
      æ­¥éª¤:
        1: "æ£€æŸ¥æ˜¯å¦è°ƒç”¨äº† simulate_offline"
        2: "æ£€æŸ¥æ˜¯å¦è°ƒç”¨äº† inject_token_expired æˆ– clear_browser_data"
        3: "ä¸¤è€…è‡³å°‘å„è°ƒç”¨ä¸€æ¬¡"
      è¯æ®: "æ¥å£è°ƒç”¨è®°å½•"
```

### 9.1 é“å¾‹æ±‡æ€»è¡¨

| ç¼–å· | åç§° | æ ¸å¿ƒè¦æ±‚ | ä¸¥é‡ç¨‹åº¦ |
|------|------|----------|----------|
| RI-01 | å¯åŠ¨å¿…æˆåŠŸ | å¤±è´¥å¿…æœ‰åŸå›  | ğŸ”´ |
| RI-02 | æ“ä½œå¿…æˆªå›¾ | æ¯æ¬¡æ“ä½œåæˆªå›¾ | ğŸ”´ |
| RI-03 | æˆªå›¾å¿…ä¿å­˜ | ä¿å­˜åˆ°æŒ‡å®šç›®å½• | âš ï¸ |
| RI-04 | è¿›ç¨‹å¿…åœæ­¢ | ä¸ç•™å­¤å„¿è¿›ç¨‹ | ğŸ”´ |
| RI-05 | ä¸å¯æ”¹æºç  | åªè¯»éªŒè¯ | ğŸ”´ |
| RI-06 | å¼‚å¸¸å¿…æ¨¡æ‹Ÿ | è‡³å°‘ä¸¤ç§å¼‚å¸¸ | âš ï¸ |

---

## åäºŒã€ç‰ˆæœ¬å†å²

| ç‰ˆæœ¬ | æ—¥æœŸ | å˜æ›´ |
|------|------|------|
| v1.0 | 2026-02-02 | åˆå§‹ç‰ˆæœ¬ï¼š3 å±‚å¹³å°æ”¯æŒï¼ˆWeb å®Œæ•´/ç§»åŠ¨è§†å£/Electronï¼‰ã€20 ä¸ªæ¥å£ï¼ˆé¡¹ç›®ç®¡ç† 3 + é¡µé¢å¯¼èˆª 4 + ç”¨æˆ·äº¤äº’ 5 + æˆªå›¾å–è¯ 4 + çŠ¶æ€æŸ¥è¯¢ 5 + å¼‚å¸¸æ¨¡æ‹Ÿ 5ï¼‰ã€Review Agent è°ƒç”¨è§„èŒƒã€Test Agent è°ƒç”¨è§„èŒƒã€æˆªå›¾è¯æ®è§„èŒƒã€å®‰å…¨ä¸éš”ç¦»è§„èŒƒã€é“å¾‹ RI-01~RI-06ï¼ˆ6 æ¡ï¼‰ |

---
